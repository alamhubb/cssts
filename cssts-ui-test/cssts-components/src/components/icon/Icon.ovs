/**
 * Icon Component (OVS)
 * 
 * Icon component written in OVS syntax.
 * Reference: Element UI icon.vue
 * 
 * 使用 props.children 传递子组件，而不是 slots
 */

import { computed } from 'vue'
import { $cls } from '../../styles/CssCls'
import { CssClsIcon } from '../../styles/components/icon'

// 使用 view 语法定义组件
view Icon(props) {
  // Computed icon classes
  const iconClasses = computed(() => {
    return $cls(CssClsIcon.base)
  })
  
  // Computed icon styles
  const iconStyles = computed(() => {
    const styles = {}
    
    if (props.size) {
      const size = typeof props.size === 'number' ? `${props.size}px` : props.size
      styles.fontSize = size
    }
    
    if (props.color) {
      styles['--color'] = props.color
    }
    
    return styles
  })

  // 渲染图标 - 使用 OVS 参数语法 (= 而不是 :)
  i(class = iconClasses.value, style = iconStyles.value) {
    // 使用 props.children 传递子组件
    props.children
  }
}

export default Icon
