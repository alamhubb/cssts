/**
 * CsstsButton - 使用 OVS 语法 + cssts css {} 表达式的按钮组件
 * 测试 vite-plugin-ovs + vite-plugin-cssts 功能
 * 
 * 自动解构功能：
 * - css { baseStyles, colorRed } 中的 baseStyles 是变量，会保持原样
 * - colorRed 是原子类名，会转换为 csstsAtom.colorRed
 * 
 * $$ 伪类语法（双美元符号）：
 * - const clickable$$hover = css { ... } 
 * - 生成普通样式 + :hover 伪类样式（伪类属性来自配置）
 */

import { computed } from 'vue'

// 基础样式（所有按钮共享）
const baseStyles = css {
  displayInlineFlex, 
  justifyContentCenter, 
  alignItemsCenter,
  paddingTop8px,
  paddingBottom8px,
  paddingLeft15px,
  paddingRight15px,
  borderRadius4px,
  cursorPointer,
  fontSize14px,
  fontWeight500,
  lineHeight1
}

// Primary 按钮样式（带伪类，使用双美元符号 $$）
const primary$$hover$$active = css { 
  baseStyles, 
  backgroundColorDodgerblue, 
  colorWhite, 
  borderNone 
}

// Success 按钮样式（带伪类，使用双美元符号 $$）
const success$$hover$$active = css { 
  baseStyles, 
  backgroundColorLimegreen, 
  colorWhite, 
  borderNone 
}

// Default 按钮样式（带伪类，使用双美元符号 $$）
// 注意：使用 defaultBtn 而不是 default，因为 default 是 JS 保留字
const defaultBtn$$hover$$active = css { 
  baseStyles, 
  backgroundColorWhite, 
  colorGray, 
  borderWidth1px, 
  borderStyleSolid, 
  borderColorLightgray 
}

// 根据 type 获取对应的样式
function getButtonClass(type) {
  if (type === 'primary') return primary$$hover$$active
  if (type === 'success') return success$$hover$$active
  return defaultBtn$$hover$$active
}

// OVS 组件定义
view CsstsButton(props) {
  const buttonClass = computed(() => getButtonClass(props.type || 'default'))
  
  button(class = buttonClass.value) {
    props.children
  }
}

export default CsstsButton
