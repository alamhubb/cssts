# Generator æ•°æ®ç”Ÿæˆè„šæœ¬

> ä» csstree å’Œè‡ªå®šä¹‰æ•°æ®ç”Ÿæˆ cssts-compiler æ‰€éœ€çš„æ•°æ®æ–‡ä»¶å’Œç±»å‹å®šä¹‰

## âš ï¸ é‡è¦æç¤º

**æ™®é€šå¼€å‘ä¸éœ€è¦æ‰§è¡Œè¿™äº›è„šæœ¬ï¼** åªæœ‰åœ¨ä»¥ä¸‹æƒ…å†µæ‰éœ€è¦è¿è¡Œï¼š

1. å‡çº§ csstree åº“ç‰ˆæœ¬
2. ä¿®æ”¹ datajson/*.json é…ç½®
3. æ·»åŠ æ–°çš„ä¼ªç±»/ä¼ªå…ƒç´ æ”¯æŒ
4. ä¿®æ”¹å•ä½åˆ†ç±»æ˜ å°„

---

## ğŸ“ ç›®å½•ç»“æ„

```
generator/
â”œâ”€â”€ datajson/                      # åŸå§‹æ•°æ®ï¼ˆæ‰‹åŠ¨ç»´æŠ¤ï¼‰
â”‚   â”œâ”€â”€ numberMapping.json         # å•ä½â†’åˆ†ç±»æ˜ å°„
â”‚   â”œâ”€â”€ pseudo-standards.json      # ä¼ªç±»/ä¼ªå…ƒç´ åˆ—è¡¨
â”‚   â””â”€â”€ propertyInheritance.json   # å±æ€§ç»§æ‰¿å…³ç³»
â”œâ”€â”€ generator-data.ts              # æ•°æ®ç”Ÿæˆè„šæœ¬ â†’ src/data/
â””â”€â”€ generator-type.ts              # ç±»å‹ç”Ÿæˆè„šæœ¬ â†’ src/config/types/
```

---

## ğŸ”— æ•°æ®æµå‘

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    csstree      â”‚     â”‚   datajson/     â”‚
â”‚  (npm åº“)       â”‚     â”‚  (æ‰‹åŠ¨ç»´æŠ¤)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ generator-data.ts   â”‚
          â”‚ (tsx æ‰§è¡Œ)           â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚    src/data/        â”‚
          â”‚  (è‡ªåŠ¨ç”Ÿæˆ .ts)      â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ generator-type.ts   â”‚
          â”‚ (tsx æ‰§è¡Œ)           â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ src/config/types/   â”‚
          â”‚ (è‡ªåŠ¨ç”Ÿæˆ .d.ts)     â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› ï¸ æ‰§è¡Œæ–¹æ³•

```bash
cd cssts/cssts/cssts-compiler

# 1. å…ˆç”Ÿæˆæ•°æ®æ–‡ä»¶
tsx generator/generator-data.ts

# 2. å†ç”Ÿæˆç±»å‹æ–‡ä»¶
tsx generator/generator-type.ts
```

**å¿…é¡»æŒ‰é¡ºåºæ‰§è¡Œ**ï¼Œå› ä¸º `generator-type.ts` ä¾èµ– `src/data/` çš„å†…å®¹ã€‚

---

## ğŸ“„ datajson/ æ–‡ä»¶è¯´æ˜

### numberMapping.json

å®šä¹‰å•ä½åˆ†ç±»æ˜ å°„ï¼š

```json
{
  "numberTypeToCategories": {
    "length": ["pixel", "fontRelative", "viewportPercentage"]
  },
  "categoryUnits": {
    "pixel": ["px"],
    "fontRelative": ["em", "rem"]
  }
}
```

**ç”¨é€”**ï¼šå†³å®šå“ªäº›å•ä½å±äºå“ªä¸ªåˆ†ç±»

### pseudo-standards.json

å®šä¹‰ä¼ªç±»å’Œä¼ªå…ƒç´ ï¼š

```json
{
  "pseudoClasses": ["hover", "focus", "active"],
  "pseudoElements": ["before", "after", "placeholder"]
}
```

**ç”¨é€”**ï¼šç”Ÿæˆ `$$hover`ã€`$$before` ç­‰ä¼ªç±»è¯­æ³•æ”¯æŒ

### propertyInheritance.json

å®šä¹‰å±æ€§ç®€å†™ç»§æ‰¿ï¼š

```json
{
  "m": ["margin"],
  "mx": ["marginLeft", "marginRight"],
  "p": ["padding"]
}
```

**ç”¨é€”**ï¼šç”¨äºç»„åˆåŸå­ç±»ç”Ÿæˆï¼ˆå¦‚ `mx10px` â†’ `marginLeft: 10px; marginRight: 10px`ï¼‰

---

## ğŸ“¦ ç”Ÿæˆçš„æ–‡ä»¶

### src/data/ (ç”± generator-data.ts ç”Ÿæˆ)

| æ–‡ä»¶ | å†…å®¹ |
|------|------|
| `cssPropertyNameMapping.ts` | CSS å±æ€§ camelCase â†’ kebab-case æ˜ å°„ |
| `cssKeywordsData.ts` | CSS å…³é”®å­—ï¼ˆflex, block, auto...ï¼‰ |
| `cssColorData.ts` | é¢œè‰²æ•°æ®ï¼ˆred, blue, transparent...ï¼‰ |
| `cssPseudoData.ts` | ä¼ªç±»/ä¼ªå…ƒç´ ï¼ˆhover, focus...ï¼‰ |
| `cssNumberData.ts` | å•ä½å’Œåˆ†ç±»ï¼ˆpx, em, %...ï¼‰ |
| `cssPropertyKeywords.ts` | å±æ€§â†’å…³é”®å­—æ˜ å°„ |
| `cssPropertyNumber.ts` | å±æ€§â†’æ•°å€¼åˆ†ç±»æ˜ å°„ |
| `cssPropertyColorTypes.ts` | å±æ€§â†’é¢œè‰²ç±»å‹æ˜ å°„ |
| `cssPropertyInheritance.ts` | å±æ€§ç»§æ‰¿å…³ç³» |

### src/config/types/ (ç”± generator-type.ts ç”Ÿæˆ)

| æ–‡ä»¶ | å†…å®¹ |
|------|------|
| `cssPropertyConfig.d.ts` | CSS å±æ€§é…ç½®ç±»å‹å®šä¹‰ |
| `csstsConfig.d.ts` | CsstsConfig æ¥å£å®šä¹‰ |

---

## â° ä½•æ—¶æ‰§è¡Œ

| åœºæ™¯ | éœ€è¦æ‰§è¡Œ |
|------|---------|
| ä¿®æ”¹è§£æ/è½¬æ¢é€»è¾‘ | âŒ ä¸éœ€è¦ |
| ä¿®æ”¹ CSS ç”Ÿæˆé€»è¾‘ | âŒ ä¸éœ€è¦ |
| å‡çº§ csstree ç‰ˆæœ¬ | âœ… æ‰§è¡Œä¸¤ä¸ªè„šæœ¬ |
| ä¿®æ”¹ datajson/*.json | âœ… æ‰§è¡Œä¸¤ä¸ªè„šæœ¬ |
| æ·»åŠ æ–°ä¼ªç±»æ”¯æŒ | âœ… ä¿®æ”¹ pseudo-standards.json åæ‰§è¡Œ |

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ä¸è¦æ‰‹åŠ¨ç¼–è¾‘ `src/data/*.ts`** - ä¼šè¢«è¦†ç›–
2. **ä¸è¦æ‰‹åŠ¨ç¼–è¾‘ `src/config/types/*.d.ts`** - ä¼šè¢«è¦†ç›–
3. **æ‰§è¡ŒåéªŒè¯** - è¿è¡Œ `npm run build` ç¡®ä¿æ²¡æœ‰ç±»å‹é”™è¯¯
