# CssTs

> CSS-in-TSï¼šç¼–è¯‘æ—¶åŸå­ CSS ç±»ç®¡ç†ç³»ç»Ÿ

CssTs æ˜¯ä¸€ä¸ªç±»å‹å®‰å…¨çš„åŸå­ CSS è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡ TypeScript æä¾›å®Œæ•´çš„ IDE æ”¯æŒï¼Œåœ¨ç¼–è¯‘æ—¶ç”Ÿæˆä¼˜åŒ–çš„ CSSã€‚

## ç‰¹æ€§

- ğŸ¯ **ç±»å‹å®‰å…¨** - å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰ï¼ŒIDE ä»£ç è¡¥å…¨
- ğŸš€ **ç¼–è¯‘æ—¶ä¼˜åŒ–** - CSS åœ¨æ„å»ºæ—¶æŒ‰éœ€ç”Ÿæˆï¼Œé›¶è¿è¡Œæ—¶å¼€é”€
- ğŸ“¦ **é›¶ä¾èµ–è¿è¡Œæ—¶** - runtime åŒ…æ— ä»»ä½•ä¾èµ–ï¼Œä½“ç§¯æœ€å°
- ğŸ¨ **`$$` ä¼ªç±»è¯­æ³•** - é€šè¿‡å˜é‡åå£°æ˜ä¼ªç±»ï¼ˆåŒç¾å…ƒç¬¦å·ï¼‰
- ğŸ§© **ç®€æ´æ•°æ®ç»“æ„** - ç»Ÿä¸€çš„ `Set<string>` å­˜å‚¨ï¼ŒæŒ‰éœ€è§£æ

## åŒ…ç»“æ„

```
cssts/
â”œâ”€â”€ cssts-compiler    # ç¼–è¯‘å™¨ï¼šè§£æã€è½¬æ¢ã€ç”Ÿæˆ
â”œâ”€â”€ cssts-runtime     # è¿è¡Œæ—¶ï¼š$clsã€replaceã€åˆ†éš”ç¬¦é…ç½®ï¼ˆåŒ…åæ˜¯ csstsï¼‰
â””â”€â”€ vite-plugin-cssts # Vite æ’ä»¶
```

> **æ³¨æ„**ï¼š`cssts-runtime` ç›®å½•çš„åŒ…åæ˜¯ `cssts`ï¼Œä¸æ˜¯ `cssts-runtime`

## å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
npm install cssts vite-plugin-cssts -D
```

### é…ç½® Vite

```typescript
// vite.config.ts
import { defineConfig } from 'vite'
import cssTsPlugin from 'vite-plugin-cssts'

export default defineConfig({
  plugins: [
    cssTsPlugin({
      pseudoUtils: {
        hover: { opacity: '0.9' },
        active: { opacity: '0.6' }
      }
    }),
  ],
})
```

### ä½¿ç”¨

```typescript
// Button.cssts

// æ™®é€šæ ·å¼
const buttonStyle = css { displayFlex, padding16px, cursorPointer }

// å¸¦ä¼ªç±»çš„æ ·å¼ï¼ˆä½¿ç”¨ $$ åŒç¾å…ƒç¬¦å·ï¼‰
const clickable$$hover$$active = css { cursorPointer, displayFlex }

// å¯¼å‡ºä½¿ç”¨
export { buttonStyle, clickable$$hover$$active }
```

```vue
<!-- åœ¨ Vue ä¸­ä½¿ç”¨ -->
<template>
  <button :class="buttonStyle">ç‚¹å‡»æˆ‘</button>
</template>

<script setup>
import { buttonStyle } from './Button.cssts'
</script>
```


## æ ¸å¿ƒè®¾è®¡ï¼šç»Ÿä¸€çš„æ ·å¼å­˜å‚¨

ä½¿ç”¨å•ä¸€çš„ `Set<string>` å­˜å‚¨æ‰€æœ‰æ ·å¼åï¼ŒæŒ‰éœ€è§£æï¼š

```typescript
// å­˜å‚¨
const styles = new Set<string>()
styles.add('displayFlex')                 // æ™®é€šåŸå­ç±»
styles.add('clickable$$hover$$active')    // å¸¦ä¼ªç±»çš„æ ·å¼ï¼ˆåŒç¾å…ƒç¬¦å·ï¼‰

// è§£æï¼ˆæŒ‰éœ€ï¼‰
parseStyleName('displayFlex')
// { baseName: 'displayFlex', pseudos: [] }

parseStyleName('clickable$$hover$$active')
// { baseName: 'clickable', pseudos: ['hover', 'active'] }
```

**ä¼˜ç‚¹**ï¼š
- æ•°æ®ç»“æ„ç®€å•
- ä¸å­˜å‚¨å†—ä½™æ•°æ®
- æŒ‰éœ€è§£æï¼Œæ›´çµæ´»

## æ ¸å¿ƒæ¦‚å¿µ

### åŸå­ç±»ï¼ˆAtomï¼‰

å•ä¸ª CSS å±æ€§çš„ç±»ï¼š

```typescript
displayFlex      // â†’ .display_flex { display: flex; }
padding16px      // â†’ .padding_16px { padding: 16px; }
colorRed         // â†’ .color_red { color: red; }
```

### ç»„åˆæ ·å¼ï¼ˆGroupUtilï¼‰

å¤šä¸ªåŸå­ç±»çš„ç»„åˆï¼š

```typescript
const buttonStyle = css { displayFlex, padding16px, cursorPointer }
// è¿è¡Œæ—¶ï¼š{ 'display_flex': true, 'padding_16px': true, 'cursor_pointer': true }
```

### $$ ä¼ªç±»è¯­æ³•

é€šè¿‡å˜é‡åå£°æ˜ä¼ªç±»ï¼ˆä½¿ç”¨ `$$` åŒç¾å…ƒç¬¦å·åˆ†éš”ï¼‰ï¼š

```typescript
// å˜é‡åæ ¼å¼ï¼š{baseName}$${pseudo1}$${pseudo2}...
const clickable$$hover$$active = css { cursorPointer }

// è§£æç»“æœ
parseStyleName('clickable$$hover$$active')
// { baseName: 'clickable', pseudos: ['hover', 'active'] }

// ç”Ÿæˆçš„ CSSï¼š
// .cursor_pointer { cursor: pointer; }     â† åŸå­ç±»
// .clickable:hover { opacity: 0.9; }       â† ä¼ªç±»ï¼ˆæ¥è‡ªé…ç½®ï¼‰
// .clickable:active { opacity: 0.6; }      â† ä¼ªç±»ï¼ˆæ¥è‡ªé…ç½®ï¼‰
```

ä¼ªç±»çš„ CSS å±æ€§æ¥è‡ª vite é…ç½®ï¼Œä¸æ˜¯æ¥è‡ª `css { }` å†…å®¹ã€‚

## å€¼è½¬æ¢è§„åˆ™

| è½¬ä¹‰ç¬¦ | å«ä¹‰ | ç¤ºä¾‹ |
|--------|------|------|
| `p` | `.` å°æ•°ç‚¹ | `opacity0p9` â†’ `0.9` |
| `pct` | `%` ç™¾åˆ†å· | `width50pct` â†’ `50%` |
| `s` | `/` æ–œæ  | `aspectRatio16s9` â†’ `16/9` |
| `N` | `-` è´Ÿæ•° | `zIndexN1` â†’ `-1` |

## æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  .cssts æ–‡ä»¶ / .ovs æ–‡ä»¶                                     â”‚
â”‚  const style = css { displayFlex, padding16px }             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Vite æ’ä»¶å±‚                                                 â”‚
â”‚  â€¢ vite-plugin-cssts: å¤„ç† .cssts æ–‡ä»¶                       â”‚
â”‚  â€¢ vite-plugin-ovs: å¤„ç† .ovs æ–‡ä»¶                           â”‚
â”‚  â€¢ å…±äº« globalStyles: Set<string> æ”¶é›†æ‰€æœ‰æ ·å¼               â”‚
â”‚  â€¢ ç”Ÿæˆè™šæ‹Ÿæ¨¡å—                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¼–è¯‘å™¨å±‚                                                    â”‚
â”‚  â€¢ cssts-compiler: è§£æ css { } è¯­æ³•                        â”‚
â”‚  â€¢ ovs-compiler: ç»§æ‰¿ cssts-compilerï¼Œå¤ç”¨ css {} å¤„ç†       â”‚
â”‚  â€¢ è½¬æ¢ä¸º cssts.$cls(csstsAtom.xxx)                         â”‚
â”‚  â€¢ æŒ‰éœ€è§£ææ ·å¼åï¼Œç”Ÿæˆ CSS                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¿è¡Œæ—¶å±‚                                                    â”‚
â”‚  â€¢ csstsï¼ˆåŒ…åï¼‰: $cls()ã€replace()ã€CSSTS_CONFIG            â”‚
â”‚  â€¢ é›¶ä¾èµ–ï¼Œåªåšå¯¹è±¡æ“ä½œ                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¾“å‡º                                                       â”‚
â”‚  â€¢ JS: cssts.$cls(csstsAtom.displayFlex, ...)               â”‚
â”‚  â€¢ CSS: .display_flex { display: flex; }                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> è¯¦ç»†æ¶æ„è¯´æ˜è¯·å‚è€ƒ [ARCHITECTURE.md](../ARCHITECTURE.md)

## åˆ†éš”ç¬¦é…ç½®

æ‰€æœ‰åˆ†éš”ç¬¦ç»Ÿä¸€åœ¨ `cssts` ä¸­é…ç½®ï¼Œcompiler å’Œ runtime å…±ç”¨ï¼š

```typescript
import { CSSTS_CONFIG } from 'cssts'

CSSTS_CONFIG.SEPARATOR        // '_'   - ç±»ååˆ†éš”ç¬¦ï¼šproperty_value
CSSTS_CONFIG.PSEUDO_SEPARATOR // '$$'  - ä¼ªç±»åˆ†éš”ç¬¦ï¼šbaseName$$pseudoï¼ˆåŒç¾å…ƒç¬¦å·ï¼‰
```

> **æ³¨æ„**ï¼šåŒ…åæ˜¯ `cssts`ï¼Œä¸æ˜¯ `cssts-runtime`ï¼ˆç›®å½•åå’ŒåŒ…åä¸ä¸€è‡´ï¼‰

## License

MIT
